(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07a11b70"],{"4bd4":function(t,e,i){"use strict";var r=i("58df"),s=i("7e2b"),a=i("3206");e["a"]=Object(r["a"])(s["a"],Object(a["b"])("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",e=>{this.$set(this.errorBag,t._uid,e)},{immediate:!0}),i={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",r=>{r&&(this.errorBag.hasOwnProperty(t._uid)||(i.valid=e(t)))}):i.valid=e(t),i},validate(){return 0===this.inputs.filter(t=>!t.validate(!0)).length},reset(){this.inputs.forEach(t=>t.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(t=>t.resetValidation()),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find(e=>e._uid===t._uid);if(!e)return;const i=this.watchers.find(t=>t._uid===e._uid);i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter(t=>t._uid!==e._uid),this.inputs=this.inputs.filter(t=>t._uid!==e._uid),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},"9b19":function(t,e,i){t.exports=i.p+"img/logo.95ba513b.svg"},a523:function(t,e,i){"use strict";i("20f6"),i("4b85");var r=i("2b0e");function s(t){return r["default"].extend({name:"v-"+t,functional:!0,props:{id:String,tag:{type:String,default:"div"}},render(e,{props:i,data:r,children:s}){r.staticClass=`${t} ${r.staticClass||""}`.trim();const{attrs:a}=r;if(a){r.attrs={};const t=Object.keys(a).filter(t=>{if("slot"===t)return!1;const e=a[t];return t.startsWith("data-")?(r.attrs[t]=e,!1):e||"string"===typeof e});t.length&&(r.staticClass+=" "+t.join(" "))}return i.id&&(r.domProps=r.domProps||{},r.domProps.id=i.id),e(i.tag,r,s)}})}var a=i("d9f7");e["a"]=s("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render(t,{props:e,data:i,children:r}){let s;const{attrs:o}=i;return o&&(i.attrs={},s=Object.keys(o).filter(t=>{if("slot"===t)return!1;const e=o[t];return t.startsWith("data-")?(i.attrs[t]=e,!1):e||"string"===typeof e})),e.id&&(i.domProps=i.domProps||{},i.domProps.id=e.id),t(e.tag,Object(a["a"])(i,{staticClass:"container",class:Array({"container--fluid":e.fluid}).concat(s||[])}),r)}})},a55b:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[r("v-row",{staticClass:"mx-0",attrs:{justify:"center"}},[r("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"12"}},[r("img",{attrs:{src:i("9b19"),height:"100"}})]),r("v-col",{attrs:{cols:"12",sm:"12",md:"6",xl:"4"}},[t.urlLogin&&t.loading?r("div",{staticClass:"full-width text-center"},[r("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}})],1):t.urlLogin?t._e():r("material-card",{staticClass:"mt-0",attrs:{loading:t.loading,color:"primary",title:"Login"}},[t.error?r("material-notification",{staticClass:"mb-3",attrs:{color:"error",icon:"mdi-information-outline"}},[t._v("\n          "+t._s(t.error)+"\n        ")]):t._e(),r("v-form",{ref:"form",on:{submit:function(t){t.preventDefault()}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-container",{staticClass:"py-0"},[r("v-row",[r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Email Address",rules:t.emailRules,required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-text-field",{attrs:{"append-icon":t.show?"mdi-eye":"mdi-eye-off",label:"Password",type:t.show?"text":"password",rules:t.passwordRules},on:{"click:append":function(e){t.show=!t.show}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("v-col",{staticClass:"text-right",attrs:{cols:"12"}},[r("v-btn",{attrs:{color:"primary",loading:t.loading},on:{click:t.submit}},[t._v("\n                  Login\n                ")])],1)],1)],1)],1)],1)],1)],1)],1)},s=[],a=(i("7514"),i("3ac0")),o={data:function(){return{error:!1,valid:!1,loading:!1,show:!1,urlLogin:!1,email:"",token:"",password:"",passwordRules:[function(t){return!!t||"Password is required"}],emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+/.test(t)||"E-mail must be valid"}]}},watch:{"$route.query.redirect":function(t){this.$route.query.redirect&&"/"!==this.$route.query.redirect&&(this.error="You need to be logged in to view this page")}},created:function(){var t=this.$route.query.logout;t&&this.logout();var e=this.$route.query.token,i=this.$route.query.email,r=this.$route.query.verify;e&&i&&(this.email=i,this.token=e,this.urlLogin=!0,this.login({email:i,token:e},r))},methods:{register:function(){this.$router.push("/register?redirect=",this.getRedirect())},submit:function(){this.$refs.form.validate()&&(this.token?this.login({email:this.email,token:this.token}):this.login({email:this.email,password:this.password}))},getRedirect:function(t){if(this.$route.query.redirect&&"/login"!==this.$route.query.redirect&&"/register"!==this.$route.query.redirect)return this.$route.query.redirect;var e=t.role.toLowerCase();return e||(e="default"),a["a"].find((function(t){return t.roles&&t.roles.indexOf(e.toLowerCase())>-1})).path},logout:function(){this.api.defaults.headers.Authorization="",localStorage.removeItem("claim"),this.$store.commit("setUser",null),this.$store.commit("setSite",null),this.$store.commit("setSites",[])},login:function(t){var e=this;this.loading=!0,this.api.post("user/login",t).then((function(t){e.loading=!1,e.$store.commit("setUser",t.data),localStorage.setItem("claim",JSON.stringify(t.data)),e.api.defaults.headers.Authorization="Bearer "+t.data.token,e.$router.push(e.getRedirect(t.data))}),(function(t){e.loading=!1,e.urlLogin=!1,e.error=t}))}}},n=o,l=i("2877"),u=i("6544"),d=i.n(u),c=i("8336"),h=i("62ad"),m=i("a523"),f=i("4bd4"),p=i("490a"),g=i("0fd9"),v=i("8654"),w=Object(l["a"])(n,r,s,!1,null,null,null);e["default"]=w.exports;d()(w,{VBtn:c["a"],VCol:h["a"],VContainer:m["a"],VForm:f["a"],VProgressCircular:p["a"],VRow:g["a"],VTextField:v["a"]})}}]);
//# sourceMappingURL=chunk-07a11b70.a80cb76b.js.map