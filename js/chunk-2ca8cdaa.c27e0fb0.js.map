{"version":3,"sources":["webpack:///./src/views/Forms.vue?e66c","webpack:///src/views/Forms.vue","webpack:///./src/views/Forms.vue?bec2","webpack:///./src/views/Forms.vue","webpack:///./src/components/core/ProfileList.vue?d207","webpack:///src/components/core/ProfileList.vue","webpack:///./src/components/core/ProfileList.vue?a077","webpack:///./src/components/core/ProfileList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","loadingSchemas","schemas","on","getForms","loadingForms","selectedSchema","name","scopedSlots","_u","key","fn","answers","length","_v","_e","proxy","updateTableKey","headers","props","_s","moment","item","created","format","staticRenderFns","component","VBtn","VCol","VContainer","VDataTable","VRow","VSpacer","_l","i","_g","$listeners","select","click","$emit","image","sub1","sub2","e","stopPropagation","VIcon","VList","VListItem","VListItemAction","VListItemContent","VListItemSubtitle","VListItemTitle"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,QAAU,WAAW,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,KAAK,GAAK,MAAM,CAACF,EAAG,gBAAgB,CAACE,MAAM,CAAC,QAAUN,EAAIO,eAAe,MAAQ,QAAQ,MAAQ,YAAY,CAACH,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQN,EAAIQ,SAASC,GAAG,CAAC,OAAST,EAAIU,aAAa,IAAI,GAAIV,EAAkB,eAAEI,EAAG,QAAQ,CAACE,MAAM,CAAC,GAAK,IAAI,KAAO,OAAO,CAACF,EAAG,gBAAgB,CAACE,MAAM,CAAC,QAAUN,EAAIW,aAAa,MAAQX,EAAIY,eAAeC,KAAK,MAAQ,WAAWC,YAAYd,EAAIe,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,WAAW,MAAO,CAACb,EAAG,YAAaJ,EAAIY,gBAAkBZ,EAAIkB,SAAWlB,EAAIkB,QAAQC,OAAS,EAAGf,EAAG,kBAAkB,CAACE,MAAM,CAAC,YAAYN,EAAIkB,QAAQ,YAAYlB,EAAIY,eAAeC,OAAO,CAACT,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,YAAY,CAACN,EAAIoB,GAAG,6CAA6C,GAAGpB,EAAIqB,OAAOC,OAAM,IAAO,MAAK,EAAM,aAAa,CAAClB,EAAG,eAAe,CAACY,IAAIhB,EAAIuB,eAAejB,MAAM,CAAC,MAAQ,UAAU,QAAUN,EAAIW,aAAa,QAAUX,EAAIwB,QAAQ,MAAQxB,EAAIkB,QAAQ,iBAAiB,IAAIJ,YAAYd,EAAIe,GAAG,CAAC,CAACC,IAAI,eAAeC,GAAG,SAASQ,GAAO,MAAO,CAACzB,EAAIoB,GAAG,iBAAiBpB,EAAI0B,GAAG1B,EAAI2B,OAAOF,EAAMG,KAAKC,SAASC,OAAO,aAAa,oBAAoB,MAAK,EAAM,eAAe,IAAI,GAAG9B,EAAIqB,MAAM,IAAI,IACxxCU,EAAkB,G,0rBC+DtB,OACE,WAAF,CACI,aAAJ,IACI,YAAJ,QAEE,KALF,WAMI,MAAJ,CACM,QAAN,GACM,eAAN,KACM,eAAN,EACM,QAAN,GACM,QAAN,GACM,gBAAN,EACM,cAAN,EACM,cAAN,eAGE,SAAF,CACI,KAAJ,WACM,OAAN,yBAGE,QAtBF,WAuBI,KAAJ,cAEE,QAAF,CACI,OAAJ,IACI,SAFJ,SAEA,GAAM,IAAN,OACM,KAAN,iBACM,IAAN,IACQ,KAAR,OACQ,MAAR,SAEM,EAAN,4BACQ,EAAR,MACU,KAAV,qBACU,MAAV,OACU,MAAV,aAGM,KAAN,UAEM,KAAN,gBACM,KAAN,4BACA,kBACQ,IAAR,SACA,KACQ,EAAR,qBACU,EAAV,QACY,KAAZ,WACA,eAGQ,QAAR,SACQ,EAAR,UACQ,EAAR,gBACQ,EAAR,oBACA,YACQ,EAAR,gBACQ,EAAR,YAGI,WArCJ,WAqCM,IAAN,OACM,KAAN,kBACM,KAAN,mCACA,kBACQ,IAAR,SACQ,EAAR,qBACU,EAAV,+CAEQ,EAAR,UACQ,EAAR,qBACA,YACQ,EAAR,kBACQ,EAAR,cC1I+U,I,yGCO3UC,EAAY,eACd,EACAjC,EACAgC,GACA,EACA,KACA,KACA,MAIa,aAAAC,EAAiB,QAUhC,IAAkBA,EAAW,CAACC,OAAA,KAAKC,OAAA,KAAKC,aAAA,KAAWC,aAAA,KAAWC,OAAA,KAAKC,UAAA,Q,kCC5BnE,IAAIvC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACJ,EAAIuC,GAAIvC,EAAS,OAAE,SAAS4B,EAAKY,GAAG,MAAO,CAACpC,EAAG,cAAcJ,EAAIyC,GAAG,CAACzB,IAAIwB,GAAGxC,EAAI0C,WAAWC,OAAS,CAAEC,MAAO,WAAc,OAAO5C,EAAI6C,MAAM,SAAUjB,KAAa,IAAI,CAACxB,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQsB,EAAKkB,MAAM,KAAOlB,EAAKkB,MAAQ,GAAKlB,EAAKf,KAAK,KAAO,MAAMT,EAAG,sBAAsB,CAACA,EAAG,oBAAoB,CAACJ,EAAIoB,GAAG,eAAepB,EAAI0B,GAAGE,EAAKf,MAAM,gBAAiBe,EAAKmB,MAAQnB,EAAKoB,KAAM5C,EAAG,uBAAuB,CAACJ,EAAIoB,GAAG,eAAepB,EAAI0B,GAAGE,EAAKmB,OAAO3C,EAAG,MAAMJ,EAAIoB,GAAGpB,EAAI0B,GAAGE,EAAKoB,MAAM,gBAAgBhD,EAAIqB,MAAM,GAAIrB,EAAI0C,WAAe,KAAEtC,EAAG,qBAAqB,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,IAAIG,GAAG,CAAC,MAAQ,SAAUwC,GAAIA,EAAEC,kBAAmBlD,EAAI6C,MAAM,OAAQjB,MAAS,CAACxB,EAAG,SAAS,CAACJ,EAAIoB,GAAG,iBAAiB,IAAI,GAAGpB,EAAIqB,KAAMrB,EAAI0C,WAAiB,OAAEtC,EAAG,qBAAqB,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,IAAIG,GAAG,CAAC,MAAQ,SAAUwC,GAAIA,EAAEC,kBAAmBlD,EAAI6C,MAAM,SAAUjB,MAAS,CAACxB,EAAG,SAAS,CAACJ,EAAIoB,GAAG,iBAAiB,IAAI,GAAGpB,EAAIqB,MAAM,QAAO,IACphCU,EAAkB,GCyCtB,GACE,MAAF,CACI,MAAJ,CACM,KAAN,MACM,QAAN,WAAQ,MAAR,OC9CoW,I,yGCOhWC,EAAY,eACd,EACAjC,EACAgC,GACA,EACA,KACA,KACA,MAIa,OAAAC,EAAiB,QAYhC,IAAkBA,EAAW,CAACC,OAAA,KAAKkB,QAAA,KAAMC,QAAA,KAAMC,YAAA,KAAUC,kBAAA,KAAgBC,iBAAA,OAAiBC,kBAAA,OAAkBC,eAAA","file":"js/chunk-2ca8cdaa.c27e0fb0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('material-card',{attrs:{\"loading\":_vm.loadingSchemas,\"title\":\"Forms\",\"color\":\"primary\"}},[_c('profile-list',{attrs:{\"items\":_vm.schemas},on:{\"select\":_vm.getForms}})],1)],1),(_vm.selectedSchema)?_c('v-col',{attrs:{\"md\":\"8\",\"cols\":\"12\"}},[_c('material-card',{attrs:{\"loading\":_vm.loadingForms,\"title\":_vm.selectedSchema.name,\"color\":\"primary\"},scopedSlots:_vm._u([{key:\"actions\",fn:function(){return [_c('v-spacer'),(_vm.selectedSchema && _vm.answers && _vm.answers.length > 0)?_c('vue-json-to-csv',{attrs:{\"json-data\":_vm.answers,\"csv-title\":_vm.selectedSchema.name}},[_c('v-btn',{attrs:{\"color\":\"primary\"}},[_vm._v(\"\\n              Download\\n            \")])],1):_vm._e()]},proxy:true}],null,false,2624560132)},[_c('v-data-table',{key:_vm.updateTableKey,attrs:{\"title\":\"entries\",\"loading\":_vm.loadingForms,\"headers\":_vm.headers,\"items\":_vm.answers,\"items-per-page\":10},scopedSlots:_vm._u([{key:\"item.created\",fn:function(props){return [_vm._v(\"\\n            \"+_vm._s(_vm.moment(props.item.created).format('DD-MM-YY'))+\"\\n          \")]}}],null,false,3321920143)})],1)],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid>\n    <v-row justify=\"center\">\n      <v-col\n        cols=\"12\"\n        md=\"4\"\n      >\n        <material-card\n          :loading=\"loadingSchemas\"\n          title=\"Forms\"\n          color=\"primary\"\n        >\n          <profile-list\n            :items=\"schemas\"\n            @select=\"getForms\"\n          />\n        </material-card>\n      </v-col>\n      <v-col\n        v-if=\"selectedSchema\"\n        md=\"8\"\n        cols=\"12\"\n      >\n        <material-card\n          :loading=\"loadingForms\"\n          :title=\"selectedSchema.name\"\n          color=\"primary\"\n        >\n          <v-data-table\n            :key=\"updateTableKey\"\n            title=\"entries\"\n            :loading=\"loadingForms\"\n            :headers=\"headers\"\n            :items=\"answers\"\n            :items-per-page=\"10\"\n          >\n            <template v-slot:item.created=\"props\">\n              {{ moment(props.item.created).format('DD-MM-YY') }}\n            </template>\n          </v-data-table>\n          <template v-slot:actions>\n            <v-spacer />\n            <vue-json-to-csv\n              v-if=\"selectedSchema && answers && answers.length > 0\"\n              :json-data=\"answers\"\n              :csv-title=\"selectedSchema.name\"\n            >\n              <v-btn\n                color=\"primary\"\n              >\n                Download\n              </v-btn>\n            </vue-json-to-csv>\n          </template>\n        </material-card>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\n  import moment from 'moment'\n  import ProfileList from '../components/core/ProfileList.vue'\n  import VueJsonToCsv from 'vue-json-to-csv'\n  export default {\n    components: {\n      VueJsonToCsv,\n      ProfileList\n    },\n    data () {\n      return {\n        schemas: [],\n        selectedSchema: null,\n        updateTableKey: 0,\n        headers: [],\n        answers: [],\n        loadingSchemas: false,\n        loadingForms: false,\n        currentDelete: () => {},\n      }\n    },\n    computed: {\n      site: function () {\n        return this.$store.state.site\n      }\n    },\n    mounted () {\n      this.getSchemas()\n    },\n    methods: {\n      moment,\n      getForms (schema) {\n        this.selectedSchema = schema\n        var headers = [{\n          text: 'Date',\n          value: 'Date'\n        }]\n        schema.fields.forEach(field => {\n          headers.push({\n            text: this.capitalize(field.name),\n            value: field.name,\n            align: 'right'\n          })\n        })\n        this.headers = headers\n\n        this.loadingForms = true\n        this.api.get('form/' + schema.schemaId)\n          .then(result => {\n            var entries = result.data\n            var answers = []\n            entries.forEach(entry => {\n              answers.push({\n                Date: entry.created,\n                ...entry.answers\n              })\n            })\n            console.log(answers, headers)\n            this.answers = answers\n            this.loadingForms = false\n            this.updateTableKey++\n          }, error => {\n            this.loadingForms = false\n            this.error = error\n          })\n      },\n      getSchemas () {\n        this.loadingSchemas = true\n        this.api.get('form/schemas/' + this.site)\n          .then(result => {\n            var schemas = result.data\n            schemas.forEach(schema => {\n              schema.sub1 = this.moment(schema.created).format('DD-MM-YY')\n            })\n            this.schemas = schemas\n            this.loadingSchemas = false\n          }, error => {\n            this.loadingSchemas = false\n            this.error = error\n          })\n      }\n    }\n\n  }\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Forms.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Forms.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Forms.vue?vue&type=template&id=759b0012&\"\nimport script from \"./Forms.vue?vue&type=script&lang=js&\"\nexport * from \"./Forms.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCol,VContainer,VDataTable,VRow,VSpacer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-list',[_vm._l((_vm.items),function(item,i){return [_c('v-list-item',_vm._g({key:i},_vm.$listeners.select ? { click: function () { return _vm.$emit('select', item); } } : {}),[_c('avatar',{attrs:{\"image\":item.image,\"name\":item.image ? '' : item.name,\"list\":\"\"}}),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"\\n          \"+_vm._s(item.name)+\"\\n        \")]),(item.sub1 || item.sub2)?_c('v-list-item-subtitle',[_vm._v(\"\\n          \"+_vm._s(item.sub1)),_c('br'),_vm._v(_vm._s(item.sub2)+\"\\n        \")]):_vm._e()],1),(_vm.$listeners.edit)?_c('v-list-item-action',[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function (e) {e.stopPropagation(); _vm.$emit('edit', item)}}},[_c('v-icon',[_vm._v(\"mdi-pencil\")])],1)],1):_vm._e(),(_vm.$listeners.delete)?_c('v-list-item-action',[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function (e) {e.stopPropagation(); _vm.$emit('delete', item)}}},[_c('v-icon',[_vm._v(\"mdi-delete\")])],1)],1):_vm._e()],1)]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-list>\n    <template v-for=\"(item, i) in items\">\n      <v-list-item\n        :key=\"i\"\n        v-on=\"$listeners.select ? { click: () => $emit('select', item) } : {}\"\n      >\n        <avatar\n          :image=\"item.image\"\n          :name=\"item.image ? '' : item.name\"\n          list\n        />\n        <v-list-item-content>\n          <v-list-item-title>\n            {{ item.name }}\n          </v-list-item-title>\n          <v-list-item-subtitle v-if=\"item.sub1 || item.sub2\">\n            {{ item.sub1 }}<br>{{ item.sub2 }}\n          </v-list-item-subtitle>\n        </v-list-item-content>\n        <v-list-item-action v-if=\"$listeners.edit\">\n          <v-btn\n            icon\n            @click=\"(e) => {e.stopPropagation(); $emit('edit', item)}\"\n          >\n            <v-icon>mdi-pencil</v-icon>\n          </v-btn>\n        </v-list-item-action>\n        <v-list-item-action v-if=\"$listeners.delete\">\n          <v-btn\n            icon\n            @click=\"(e) => {e.stopPropagation(); $emit('delete', item)}\"\n          >\n            <v-icon>mdi-delete</v-icon>\n          </v-btn>\n        </v-list-item-action>\n      </v-list-item>\n    </template>\n  </v-list>\n</template>\n\n<script>\n  export default {\n    props: {\n      items: {\n        type: Array,\n        default: () => []\n      }\n    }\n  }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProfileList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProfileList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProfileList.vue?vue&type=template&id=8ac1df20&\"\nimport script from \"./ProfileList.vue?vue&type=script&lang=js&\"\nexport * from \"./ProfileList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VBtn,VIcon,VList,VListItem,VListItemAction,VListItemContent,VListItemSubtitle,VListItemTitle})\n"],"sourceRoot":""}