(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d091e1c2"],{"2f21":function(t,e,n){"use strict";var r=n("79e5");t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},3530:function(t,e,n){"use strict";n.r(e);var r=n("8336"),i=n("b0af"),a=n("62ad"),o=n("a523"),s=n("132d"),c=n("8860"),l=n("da13"),u=n("5d23"),d=n("e449"),m=n("490a"),p=n("0fd9"),f=n("2fa4"),h=(n("7f7f"),function(){var t=this,e=t._self._c;return e(o["a"],{attrs:{fluid:""}},[e(p["a"],{attrs:{justify:"center"}},[e(a["a"],{attrs:{cols:"12",md:"4"}},[e("material-card",{staticClass:"v-card-profile",attrs:{loading:t.loadingCompanies,color:"primary"},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"pa-3"},[e("h4",{staticClass:"title font-weight-light"},[t._v("\n              Companies\n            ")])]),e(f["a"]),e(r["a"],{staticClass:"mr-3",attrs:{color:"secondary"},on:{click:t.onCompanySelect}},[e(s["a"],{staticClass:"pr-3"},[t._v("\n              mdi-plus\n            ")]),t._v("Add Company\n          ")],1)]},proxy:!0}])},[t.loadingCompanies?e(m["a"],{attrs:{size:50,color:"primary",indeterminate:""}}):e("profile-list",{attrs:{items:t.companies},on:{select:t.selectCompany}})],1)],1),e(a["a"],{attrs:{cols:"12",md:"8"}},[t.selectedCompany?e("material-card",{staticClass:"v-card-profile",attrs:{color:"primary"},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"pa-3"},[e("h4",{staticClass:"title font-weight-light"},[t._v("\n              "+t._s(t.selectedCompany.name)+"\n            ")])]),e(f["a"]),e(d["a"],{attrs:{bottom:"",left:"","offset-y":"",transition:"slide-y-transition"},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.attrs,a=n.on;return[e(r["a"],t._g(t._b({staticClass:"toolbar-items",attrs:{icon:"",to:t.user?null:"/login?redirect="+t.$route.path}},"v-btn",i,!1),a),[e(s["a"],{attrs:{color:"secondary"}},[t._v("\n                  mdi-dots-vertical\n                ")])],1)]}}],null,!1,316168284)},[e(i["a"],[e(c["a"],{attrs:{dense:""}},[e(l["a"],{on:{click:function(){return t.onCompanySelect(t.selectedCompany)}}},[e(u["c"],[t._v("\n                    Edit Company\n                  ")])],1),e(l["a"],{on:{click:function(){return t.onMollieSelect(t.selectedCompany)}}},[e(u["c"],[t._v("\n                    Edit Mollie\n                  ")])],1),e(l["a"],{on:{click:t.onUserSelect}},[e(u["c"],[t._v("\n                    Add User\n                  ")])],1),e(l["a"],{on:{click:t.onSiteSelect}},[e(u["c"],[t._v("\n                    Add Site\n                  ")])],1)],1)],1)],1)]},proxy:!0}],null,!1,1348576621)},[e(p["a"],[e(a["a"],{attrs:{cols:"12",md:"6"}},[e("h6",{staticClass:"overline"},[t._v("\n              Users\n            ")]),t.loadingUsers?e(m["a"],{attrs:{size:50,color:"primary",indeterminate:""}}):e("profile-list",{attrs:{items:t.users},on:{edit:t.onUserSelect,delete:t.onUserDelete}})],1),e(a["a"],{attrs:{cols:"12",md:"6"}},[e("h6",{staticClass:"overline"},[t._v("\n              Sites\n            ")]),e("profile-list",{attrs:{items:t.getSites()},on:{edit:t.onSiteSelect,delete:t.onSiteDelete}})],1)],1)],1):t._e()],1)],1),e("form-dialog",{ref:"dialog",attrs:{title:t.currentTitle,schema:t.currentSchema,item:t.currentItem},on:{submit:t.currentSubmit}}),e("yes-no-dialog",{ref:"yesno",on:{yes:t.currentDelete}})],1)}),y=[],b=(n("8e6e"),n("456d"),n("6c7b"),n("28a5"),n("55dd"),n("ac6a"),n("75fc")),v=n("bd86"),g=n("cfc7"),S=n("283a"),C=n("c5f5"),I=n("c1df"),_=n.n(I);function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){Object(v["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O={components:{FormDialog:g["a"],YesNoDialog:S["a"],ProfileList:C["a"]},data:function(){return{loadingCompanies:!1,loadingUsers:!1,currentTitle:"",currentSchema:{},currentSubmit:function(){},currentDelete:function(){},currentItem:{},companySchema:{name:{type:"text",label:"Name"}},userSchema:{name:{type:"text",label:"Name"},email:{type:"email",label:"Email"},password:{type:"password",appendIcon:"mdi-eye",label:"Password"},role:{type:"select",label:"Role",items:["Customer","Editor","Admin"]}},siteSchema:{name:{type:"text",label:"Name"},domain:{type:"text",label:"Domain"},repoName:{type:"text",label:"Repository Name"}},mollieSchema:{liveKey:{type:"text",label:"Live Key"},testKey:{type:"text",label:"Test Key"},partnerId:{type:"text",label:"Partner Id"},profileId:{type:"text",label:"Profile Id"},shippingCost:{type:"text",label:"Shipping Cost"},shippingCostFree:{type:"text",label:"Shipping Cost Free"},notification:{type:"text",label:"Notification"}},companies:[],users:[],selectedCompany:null,user:M({},this.$store.state.user)}},computed:{company:function(){return this.$store.state.company},sites:function(){return this.$store.state.sites}},created:function(){this.selectedCompany=this.company,this.getCompanies(),this.getUsers()},methods:{moment:_.a,selectCompany:function(t){this.selectedCompany=t,this.getUsers()},onCompanySelect:function(t){this.currentSchema=this.companySchema,this.currentSubmit=this.updateCompany,t&&t.companyId?(this.currentItem=t,this.currentTitle="Update Company",this.currentMethod="put"):(this.currentItem={},this.currentTitle="Add Company",this.currentMethod="post"),this.$refs.dialog.open()},onMollieSelect:function(t){var e=this;this.currentSchema=this.mollieSchema,this.currentSubmit=this.updateMollie,this.currentMethod="put",this.currentItem={companyId:t.companyId},this.currentTitle="Update MollieSettings",this.$refs.dialog.open(),this.api.get("company/mollie/"+t.companyId).then((function(t){t.data&&(e.currentItem=t.data)}),(function(t){e.error=t}))},onSiteDelete:function(t){var e=this;this.currentDelete=function(n){return e.deleteSite(t,n)},this.$refs.yesno.open("Delete ".concat(t.name),"Are you sure you want to delete ".concat(t.name," from ").concat(this.selectedCompany.name,"?"))},onSiteSelect:function(t){this.currentSchema=this.siteSchema,this.currentSubmit=this.updateSite,t&&t.siteId?(this.currentItem=t,this.currentTitle="Update Site",this.currentMethod="put"):(this.currentItem={},this.currentTitle="Add Site",this.currentMethod="post"),this.$refs.dialog.open()},onUserDelete:function(t){var e=this;this.currentDelete=function(n){return e.deleteUser(t,n)},this.$refs.yesno.open("Remove ".concat(t.name),"Are you sure you want to remove ".concat(t.name," from ").concat(this.selectedCompany.name,"?"))},onUserSelect:function(t){this.currentSchema=this.userSchema,this.currentSubmit=this.updateUser,t&&t.userId?(this.currentItem=t,this.currentTitle="Update User",this.currentMethod="put"):(this.currentItem={password:this.randPassword(5,3,2,1)},this.currentTitle="Add User",this.currentMethod="post"),this.$refs.dialog.open()},updateUser:function(t){var e=this,n=t.item;n.companyId||(n.companyId=this.selectedCompany.companyId),this.api[this.currentMethod]("user",n).then((function(n){e.getUsers(),e.user.userId===n.data.userId&&(e.$store.commit("setUser",n.data),localStorage.setItem("claim",JSON.stringify(n.data))),t.done()}),(function(n){e.error=n,t.done()}))},updateCompany:function(t){var e=this,n=t.item;this.api[this.currentMethod]("company",n).then((function(n){e.getCompanies(),e.company.companyId===n.data.companyId&&e.$store.commit("setCompany",n.data),t.done()}),(function(n){e.error=n,t.done()}))},updateMollie:function(t){var e=this,n=t.item;this.api[this.currentMethod]("company/mollie",n).then((function(e){t.done()}),(function(n){e.error=n,t.done()}))},updateSite:function(t){var e=this,n=t.item;n.companyId||(n.companyId=this.selectedCompany.companyId),this.api[this.currentMethod]("sites",n).then((function(n){var r=[];"put"===e.currentMethod?r=e.sites.map((function(t){return t.siteId===n.data.siteId?n.data:t})):"post"===e.currentMethod&&(r=[n.data].concat(Object(b["a"])(e.sites))),e.$store.commit("setSites",r),t.done()}),(function(n){e.error=n,t.done()}))},getSites:function(){var t=this,e=this.sites.filter((function(e){return e.companyId===t.selectedCompany.companyId}));return e.forEach((function(e){e.sub1=e.domain,e.sub2=t.moment(e.created).format("DD-MM-YY")})),e},getUsers:function(){var t=this;this.selectedCompany&&!this.loadingUsers&&(this.loadingUsers=!0,this.api.get("user/list/"+this.selectedCompany.companyId).then((function(e){var n=e.data;n.forEach((function(e){e.sub1=e.email,e.sub2=t.moment(e.created).format("DD-MM-YY")})),t.users=n,t.loadingUsers=!1}),(function(e){t.loadingUsers=!1,t.error=e})))},getCompanies:function(){var t=this;this.loadingCompanies||(this.loadingCompanies=!0,this.api.get("company/list").then((function(e){var n=e.data;n.forEach((function(e){e.sub1=t.moment(e.created).format("DD-MM-YY")})),t.companies=n,t.loadingCompanies=!1}),(function(e){t.loadingCompanies=!1,t.error=e})))},deleteUser:function(t,e){var n=this;this.api.delete("user/"+t.userId).then((function(t){n.getUsers(),e()}),(function(t){e(),n.error=t}))},deleteSite:function(t,e){var n=this;this.api.delete("sites/"+t.siteId).then((function(r){var i=n.sites.filter((function(e){return e.siteId!==t.siteId}));n.$store.commit("setSites",i),e()}),(function(t){e(),n.error=t}))},randPassword:function(t,e,n,r){var i=["abcdefghijklmnopqrstuvwxyz","0123456789","ABCDEFGHIJKLMNOPQRSTUVWXYZ","@#!?"];return[t,e,n,r].map((function(t,e){return Array(t).fill(i[e]).map((function(t){return t[Math.floor(Math.random()*t.length)]})).join("")})).concat().join("").split("").sort((function(){return.5-Math.random()})).join("")}}},j=O,w=n("2877"),P=Object(w["a"])(j,h,y,!1,null,null,null);e["default"]=P.exports},"36bd":function(t,e,n){"use strict";var r=n("4bf8"),i=n("77f1"),a=n("9def");t.exports=function(t){var e=r(this),n=a(e.length),o=arguments.length,s=i(o>1?arguments[1]:void 0,n),c=o>2?arguments[2]:void 0,l=void 0===c?n:i(c,n);while(l>s)e[s++]=t;return e}},"55dd":function(t,e,n){"use strict";var r=n("5ca1"),i=n("d8e8"),a=n("4bf8"),o=n("79e5"),s=[].sort,c=[1,2,3];r(r.P+r.F*(o((function(){c.sort(void 0)}))||!o((function(){c.sort(null)}))||!n("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(a(this)):s.call(a(this),i(t))}})},"6c7b":function(t,e,n){var r=n("5ca1");r(r.P,"Array",{fill:n("36bd")}),n("9c6c")("fill")},"75fc":function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n("a745"),i=n.n(r),a=n("db2a");function o(t){if(i()(t))return Object(a["a"])(t)}var s=n("67bb"),c=n.n(s),l=n("5d58"),u=n.n(l),d=n("774e"),m=n.n(d);function p(t){if("undefined"!==typeof c.a&&null!=t[u.a]||null!=t["@@iterator"])return m()(t)}var f=n("e630");function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(t){return o(t)||p(t)||Object(f["a"])(t)||h()}},a523:function(t,e,n){"use strict";n("20f6"),n("4b85");var r=n("2b0e");function i(t){return r["default"].extend({name:"v-"+t,functional:!0,props:{id:String,tag:{type:String,default:"div"}},render(e,{props:n,data:r,children:i}){r.staticClass=`${t} ${r.staticClass||""}`.trim();const{attrs:a}=r;if(a){r.attrs={};const t=Object.keys(a).filter(t=>{if("slot"===t)return!1;const e=a[t];return t.startsWith("data-")?(r.attrs[t]=e,!1):e||"string"===typeof e});t.length&&(r.staticClass+=" "+t.join(" "))}return n.id&&(r.domProps=r.domProps||{},r.domProps.id=n.id),e(n.tag,r,i)}})}var a=n("d9f7");e["a"]=i("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render(t,{props:e,data:n,children:r}){let i;const{attrs:o}=n;return o&&(n.attrs={},i=Object.keys(o).filter(t=>{if("slot"===t)return!1;const e=o[t];return t.startsWith("data-")?(n.attrs[t]=e,!1):e||"string"===typeof e})),e.id&&(n.domProps=n.domProps||{},n.domProps.id=e.id),t(e.tag,Object(a["a"])(n,{staticClass:"container",class:Array({"container--fluid":e.fluid}).concat(i||[])}),r)}})},c5f5:function(t,e,n){"use strict";var r=n("8336"),i=n("132d"),a=n("8860"),o=n("da13"),s=n("1800"),c=n("5d23"),l=(n("7f7f"),function(){var t=this,e=t._self._c;return e(a["a"],[t._l(t.items,(function(n,a){return[e(o["a"],t._g({key:a},t.$listeners.select?{click:function(){return t.$emit("select",n)}}:{}),[e("avatar",{attrs:{image:n.image,name:n.image?"":n.name,list:""}}),e(c["a"],[e(c["c"],[t._v("\n          "+t._s(n.name)+"\n        ")]),n.sub1||n.sub2?e(c["b"],[t._v("\n          "+t._s(n.sub1)),e("br"),t._v(t._s(n.sub2)+"\n        ")]):t._e()],1),t.$listeners.edit?e(s["a"],[e(r["a"],{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.$emit("edit",n)}}},[e(i["a"],[t._v("mdi-pencil")])],1)],1):t._e(),t.$listeners.delete?e(s["a"],[e(r["a"],{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.$emit("delete",n)}}},[e(i["a"],[t._v("mdi-delete")])],1)],1):t._e()],1)]}))],2)}),u=[],d={props:{items:{type:Array,default:function(){return[]}}}},m=d,p=n("2877"),f=Object(p["a"])(m,l,u,!1,null,null,null);e["a"]=f.exports}}]);
//# sourceMappingURL=chunk-d091e1c2.77a660f9.js.map